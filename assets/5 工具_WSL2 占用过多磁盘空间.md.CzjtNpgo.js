import{_ as s,o as e,c as i,ag as t}from"./chunks/framework.DEqXEGcv.js";const k=JSON.parse('{"title":"WSL2 占用过多磁盘空间","description":"","frontmatter":{"tags":["wsl","环境配置"]},"headers":[],"relativePath":"5 工具/WSL2 占用过多磁盘空间.md","filePath":"5 工具/WSL2 占用过多磁盘空间.md","lastUpdated":1770949611000}'),n={name:"5 工具/WSL2 占用过多磁盘空间.md"};function l(p,a,r,d,h,o){return e(),i("div",null,[...a[0]||(a[0]=[t(`<h1 id="wsl2-占用过多磁盘空间" tabindex="-1">WSL2 占用过多磁盘空间 <a class="header-anchor" href="#wsl2-占用过多磁盘空间" aria-label="Permalink to &quot;WSL2 占用过多磁盘空间&quot;">​</a></h1> <p>参考资料： <a href="https://blog.csdn.net/weixin_44286143/article/details/132858503?spm=1001.2101.3001.6650.2&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-2-132858503-blog-135723290.235%5Ev43%5Epc_blog_bottom_relevance_base4&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-2-132858503-blog-135723290.235%5Ev43%5Epc_blog_bottom_relevance_base4&amp;utm_relevant_index=5" target="_blank" rel="noreferrer">【琐碎问题】WSL2空间清理_清理 wsl2 liunx子系统空间-CSDN博客</a></p> <h2 id="_1-查找-文件夹下大文件" tabindex="-1">1. 查找 <code>~</code> 文件夹下大文件： <a class="header-anchor" href="#_1-查找-文件夹下大文件" aria-label="Permalink to &quot;1. 查找 \`~\` 文件夹下大文件：&quot;">​</a></h2> <ol><li><code>sudo du -hc --max-depth=1 ~ | sort -rh</code></li> <li><code>ls -lhS</code></li></ol> <p>清理大文件。</p> <h2 id="_2-回收-linux-文件系统中未使用的块资源" tabindex="-1">2. 回收 Linux 文件系统中未使用的块资源 <a class="header-anchor" href="#_2-回收-linux-文件系统中未使用的块资源" aria-label="Permalink to &quot;2. 回收 Linux 文件系统中未使用的块资源&quot;">​</a></h2> <p>原文链接：<a href="https://www.linuxcool.com/fstrim" target="_blank" rel="noreferrer">https://www.linuxcool.com/fstrim</a></p> <div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fstrim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_3-关闭-wsl" tabindex="-1">3. 关闭 WSL <a class="header-anchor" href="#_3-关闭-wsl" aria-label="Permalink to &quot;3. 关闭 WSL&quot;">​</a></h2> <div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wsl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shutdown</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>做好备份。</p> <h2 id="_3-diskpart" tabindex="-1">3. DiskPart <a class="header-anchor" href="#_3-diskpart" aria-label="Permalink to &quot;3. DiskPart&quot;">​</a></h2> <p>找到 wsl 虚拟磁盘文件路径，一般为 <code>C:\\Users\\&lt;your_username&gt;\\AppData\\Local\\Packages\\&lt;distro_package_name&gt;\\LocalState\\ext4.vhdx</code>。</p> <p>我的路径：</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>C:\\Users\\3364\\AppData\\Local\\Packages\\CanonicalGroupLimited.Ubuntu20.04LTS_79rhkp1fndgsc\\LocalState\\ext4.vhdx</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>打开命令行执行 <code>diskpart</code>, 在 DISKPART 命令行执行如下命令：</p> <div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vdisk file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C:\\Users\\&lt;your_username&gt;\\AppData\\Local\\Packages\\CanonicalGroupLimited.Ubuntu20.04LTS_79rhkp1fndgsc\\LocalState\\ext4.vhdx&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">attach</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> readonly</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compact</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vdisk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">detach</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vdisk</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>重启 WSL。</p>`,31)])])}const u=s(n,[["render",l]]);export{k as __pageData,u as default};
