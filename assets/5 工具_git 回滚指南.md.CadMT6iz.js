import{_ as i,o as a,c as n,ag as t}from"./chunks/framework.DEqXEGcv.js";const c=JSON.parse('{"title":"本地代码回滚","description":"","frontmatter":{},"headers":[],"relativePath":"5 工具/git 回滚指南.md","filePath":"5 工具/git 回滚指南.md","lastUpdated":1770949611000}'),h={name:"5 工具/git 回滚指南.md"};function l(e,s,p,r,k,d){return a(),n("div",null,[...s[0]||(s[0]=[t(`<p>参考链接：</p> <ul><li><a href="https://blog.csdn.net/u013399759/article/details/52212436" target="_blank" rel="noreferrer">Git代码库回滚指南-CSDN博客</a></li></ul> <p>git代码库回滚: 指的是将代码库某分支退回到以前的某个 commit id</p> <h1 id="本地代码回滚" tabindex="-1">本地代码回滚 <a class="header-anchor" href="#本地代码回滚" aria-label="Permalink to &quot;本地代码回滚&quot;">​</a></h1> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git reset --hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit-id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 	# 回滚到commit-id，将commit-id之后提交的commit都去除</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> HEAD~3</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  	#将最近3次的提交回滚</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="远程代码回滚" tabindex="-1">远程代码回滚 <a class="header-anchor" href="#远程代码回滚" aria-label="Permalink to &quot;远程代码回滚&quot;">​</a></h1> <p>应用场景：自动部署系统发布后发现问题，需要回滚到某一个commit，再重新发布</p> <p>原理：先将本地分支退回到某个commit，删除远程分支，再重新push本地分支</p> <h2 id="方法一" tabindex="-1">方法一 <a class="header-anchor" href="#方法一" aria-label="Permalink to &quot;方法一&quot;">​</a></h2> <p><strong>操作步骤：</strong></p> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_branch</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> branch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_branch_backup</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 		# 备份当前分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the_commit_id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 回退到指定的commit_id</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push origin :your_branch</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 		#  删除远程 your_branch</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_branch</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 		# 用回滚后的本地分支重新建立远程分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :your_branch_backup</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 如果前面都成功了，删除备份分支</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="方法二" tabindex="-1">方法二 <a class="header-anchor" href="#方法二" aria-label="Permalink to &quot;方法二&quot;">​</a></h2> <p><strong>操作步骤：</strong></p> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_branch</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> branch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_branch_backup</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 		# 备份当前分支</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --hard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the_commit_id</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 回退到指定的commit_id</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your_branch</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 		# 强制更新</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,25)])])}const g=i(h,[["render",l]]);export{c as __pageData,g as default};
