import{_ as d,o as e,c as s,ag as o}from"./chunks/framework.DEqXEGcv.js";const b=JSON.parse('{"title":"解决 GDB 附加进程时的 ptrace 不允许","description":"","frontmatter":{},"headers":[],"relativePath":"5 工具/gdb 常用命令.md","filePath":"5 工具/gdb 常用命令.md","lastUpdated":1770949611000}'),a={name:"5 工具/gdb 常用命令.md"};function r(c,t,n,i,l,p){return e(),s("div",null,[...t[0]||(t[0]=[o(`<p>以下是 GDB（GNU Debugger）常用命令的表格总结，按功能分类便于查阅：</p> <table tabindex="0"><thead><tr><th><strong>类别</strong></th> <th><strong>命令</strong></th> <th><strong>简写</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td><strong>启动与退出</strong></td> <td><code>gdb [可执行文件]</code></td> <td>—</td> <td>启动 GDB 并加载可执行文件</td></tr> <tr><td></td> <td><code>quit</code></td> <td><code>q</code></td> <td>退出 GDB</td></tr> <tr><td><strong>运行控制</strong></td> <td><code>run [args]</code></td> <td><code>r</code></td> <td>开始运行程序（可带参数）</td></tr> <tr><td></td> <td><code>start</code></td> <td>—</td> <td>启动程序并停在 main 函数开头</td></tr> <tr><td></td> <td><code>continue</code></td> <td><code>c</code></td> <td>继续运行直到下一个断点或结束</td></tr> <tr><td></td> <td><code>kill</code></td> <td>—</td> <td>终止正在调试的程序</td></tr> <tr><td><strong>断点管理</strong></td> <td><code>break [位置]</code></td> <td><code>b</code></td> <td>在指定位置设断点（函数名、行号、地址等）<br>例：<code>b main</code>, <code>b file.c:10</code></td></tr> <tr><td></td> <td><code>break [位置] if [条件]</code></td> <td>—</td> <td>设置条件断点</td></tr> <tr><td></td> <td><code>info breakpoints</code></td> <td><code>i b</code></td> <td>查看所有断点</td></tr> <tr><td></td> <td><code>delete [编号]</code></td> <td><code>d</code></td> <td>删除指定编号的断点（不带编号则删除所有）</td></tr> <tr><td></td> <td><code>disable [编号]</code></td> <td>—</td> <td>禁用断点</td></tr> <tr><td></td> <td><code>enable [编号]</code></td> <td>—</td> <td>启用断点</td></tr> <tr><td><strong>单步执行</strong></td> <td><code>step</code></td> <td><code>s</code></td> <td>单步进入（会进入函数内部）</td></tr> <tr><td></td> <td><code>next</code></td> <td><code>n</code></td> <td>单步跳过（不进入函数）</td></tr> <tr><td></td> <td><code>finish</code></td> <td>—</td> <td>执行完当前函数并返回</td></tr> <tr><td></td> <td><code>until [位置]</code></td> <td><code>u</code></td> <td>运行到指定行（常用于跳出循环）</td></tr> <tr><td><strong>查看信息</strong></td> <td><code>list [位置]</code></td> <td><code>l</code></td> <td>显示源代码（默认当前行附近）</td></tr> <tr><td></td> <td><code>print [表达式]</code></td> <td><code>p</code></td> <td>打印变量或表达式的值</td></tr> <tr><td></td> <td><code>display [表达式]</code></td> <td>—</td> <td>每次停住时自动显示表达式的值</td></tr> <tr><td></td> <td><code>info locals</code></td> <td>—</td> <td>显示当前作用域的局部变量</td></tr> <tr><td></td> <td><code>info args</code></td> <td>—</td> <td>显示当前函数的参数</td></tr> <tr><td></td> <td><code>info registers</code></td> <td><code>i r</code></td> <td>显示寄存器内容（需支持）</td></tr> <tr><td><strong>栈帧操作</strong></td> <td><code>backtrace</code></td> <td><code>bt</code></td> <td>显示调用栈（函数调用链）</td></tr> <tr><td></td> <td><code>frame [编号]</code></td> <td><code>f</code></td> <td>切换到指定栈帧</td></tr> <tr><td></td> <td><code>up</code> / <code>down</code></td> <td>—</td> <td>向上调用栈 / 向下调用栈移动一帧</td></tr> <tr><td><strong>内存与寄存器</strong></td> <td><code>x/[数量][格式][单位] 地址</code></td> <td><code>x</code></td> <td>查看内存内容<br>例：<code>x/10wx 0x1234</code>（10 个十六进制字）</td></tr> <tr><td></td> <td><code>set variable var = value</code></td> <td>—</td> <td>修改变量的值</td></tr> <tr><td><strong>其他实用命令</strong></td> <td><code>help [命令]</code></td> <td><code>h</code></td> <td>获取帮助</td></tr> <tr><td></td> <td><code>shell [命令]</code></td> <td>—</td> <td>在 GDB 中执行 shell 命令</td></tr> <tr><td></td> <td><code>set args [参数]</code></td> <td>—</td> <td>设置程序运行参数（等效于 run 时传参）</td></tr> <tr><td></td> <td><code>show args</code></td> <td>—</td> <td>显示当前设置的程序参数</td></tr></tbody></table> <blockquote><p>💡 提示：</p> <ul><li>大多数命令支持 Tab 自动补全。</li> <li>可使用 <code>command [编号]</code> 为断点添加自动执行命令。</li> <li>使用 <code>layout src</code>（TUI 模式）可分屏显示源码和命令。</li></ul></blockquote> <p>gdb -batch -ex &quot;thread apply all bt&quot; -p $PID</p> <h1 id="解决-gdb-附加进程时的-ptrace-不允许" tabindex="-1">解决 GDB 附加进程时的 ptrace 不允许 <a class="header-anchor" href="#解决-gdb-附加进程时的-ptrace-不允许" aria-label="Permalink to &quot;解决 GDB 附加进程时的 ptrace 不允许&quot;">​</a></h1> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编辑 sysctl 配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.d/10-ptrace.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 添加以下内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kernel.yama.ptrace_scope</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 应用配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.d/10-ptrace.conf</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>`,11)])])}const g=d(a,[["render",r]]);export{b as __pageData,g as default};
