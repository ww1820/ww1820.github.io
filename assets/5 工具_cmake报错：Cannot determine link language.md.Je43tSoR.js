import{_ as a,o as n,c as i,ag as e}from"./chunks/framework.DEqXEGcv.js";const E=JSON.parse('{"title":"cmake报错：Cannot determine link language","description":"","frontmatter":{"tags":["Bug","cmake"]},"headers":[],"relativePath":"5 工具/cmake报错：Cannot determine link language.md","filePath":"5 工具/cmake报错：Cannot determine link language.md","lastUpdated":1770949742000}'),l={name:"5 工具/cmake报错：Cannot determine link language.md"};function p(t,s,r,k,h,c){return n(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="cmake报错-cannot-determine-link-language" tabindex="-1">cmake报错：Cannot determine link language <a class="header-anchor" href="#cmake报错-cannot-determine-link-language" aria-label="Permalink to &quot;cmake报错：Cannot determine link language&quot;">​</a></h1> <p>报错：
<img src="https://blog-1312962011.cos.ap-nanjing.myqcloud.com/imgs/20230810205840.png" alt="cmake报错信息" loading="lazy"></p> <p>cmake文件：</p> <div class="language-SHELL vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">SHELL</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cmake_minimum_required(VERSION</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">project(ErrorMgr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 编译参数</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CMAKE_CXX_STANDARD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 17</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CMAKE_CXX_FLAGS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CMAKE_CXX_FLAGS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -Wall -pthread -fPIC -fpermissive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># zmq 优化等级只能用O0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CMAKE_CXX_FLAGS_DEBUG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CMAKE_CXX_FLAGS_DEBUG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -O0 &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CMAKE_CXX_FLAGS_RELEASE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CMAKE_CXX_FLAGS_RELEASE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -O0 &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">include_directories(usr/include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">include_directories($</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{CMAKE_SOURCE_DIR}</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/core/framework/error-manager/include</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_executable(ErrorManager</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> src/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">target_link_libraries(ErrorManager</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yaml-cpp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>报错的意思是cmake不知道链接到哪种语言，原因有很多种，参考<a href="https://stackoverflow.com/questions/11801186/cmake-unable-to-determine-linker-language-with-c" target="_blank" rel="noreferrer">CMake unable to determine linker language with C++ - Stack Overflow</a>之后，添加</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>set_target_properties(ErrorManager PROPERTIES LINKER_LANGUAGE CXX)</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>cmake成功，但是 <code>make</code> 时报错：</p> <p><img src="https://blog-1312962011.cos.ap-nanjing.myqcloud.com/imgs/20230810210553.png" alt="make报错" loading="lazy"></p> <p>找不到 <code>main()</code> 函数。分析原因 <code>add_executable(ErrorManager src/)</code> 没找到源文件。</p> <p>正确的写法：</p> <div class="language-CMakeList.txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">CMakeList.txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>AUX_SOURCE_DIRECTORY(src/ SRC_LIST)</span></span>
<span class="line"><span>add_executable(ErrorManager \${SRC_LIST})</span></span>
<span class="line"><span></span></span>
<span class="line"><span># add_executable(ErrorManager \${PROJECT_SOURCE_DIR}/src)  # Error</span></span>
<span class="line"><span># add_executable(ErrorManager src/) # Error</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,19)])])}const g=a(l,[["render",p]]);export{E as __pageData,g as default};
