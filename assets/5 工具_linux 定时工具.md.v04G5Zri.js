import{_ as n,o as a,c as e,ag as i}from"./chunks/framework.DEqXEGcv.js";const b=JSON.parse('{"title":"å®šæ—¶é‡å¯","description":"","frontmatter":{},"headers":[],"relativePath":"5 å·¥å…·/linux å®šæ—¶å·¥å…·.md","filePath":"5 å·¥å…·/linux å®šæ—¶å·¥å…·.md","lastUpdated":1770949611000}'),p={name:"5 å·¥å…·/linux å®šæ—¶å·¥å…·.md"};function l(t,s,r,d,h,c){return a(),e("div",null,[...s[0]||(s[0]=[i(`<h1 id="å®šæ—¶é‡å¯" tabindex="-1">å®šæ—¶é‡å¯ <a class="header-anchor" href="#å®šæ—¶é‡å¯" aria-label="Permalink to &quot;å®šæ—¶é‡å¯&quot;">â€‹</a></h1> <p>åœ¨ Linux ä¸­ä½¿ç”¨ <code>cron</code>æˆ– <code>systemd</code>è®¾ç½®æ¯å¤©å‡Œæ™¨ 5 ç‚¹é‡å¯çš„ä»»åŠ¡éƒ½éå¸¸æ–¹ä¾¿ã€‚<strong><code>cron</code>æ–¹æ³•æ›´ä¸ºç®€å•ç›´æ¥ï¼Œæ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹çš„é¦–é€‰ã€‚</strong></p> <hr> <h2 id="æ–¹æ³•ä¸€-ä½¿ç”¨-crontab-æ¨è-æœ€å¸¸ç”¨" tabindex="-1">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Crontabï¼ˆæ¨èï¼Œæœ€å¸¸ç”¨ï¼‰ <a class="header-anchor" href="#æ–¹æ³•ä¸€-ä½¿ç”¨-crontab-æ¨è-æœ€å¸¸ç”¨" aria-label="Permalink to &quot;æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Crontabï¼ˆæ¨èï¼Œæœ€å¸¸ç”¨ï¼‰&quot;">â€‹</a></h2> <p>è¿™æ˜¯æœ€ç»å…¸ã€æœ€å¿«æ·çš„æ–¹æ³•ã€‚</p> <ol><li><p><strong>ç¼–è¾‘ root ç”¨æˆ·çš„ crontab</strong>â€‹</p> <p>é‡å¯éœ€è¦ root æƒé™ï¼Œå› æ­¤å¿…é¡»ä½¿ç”¨ <code>sudo</code>ç¼–è¾‘ root çš„ä»»åŠ¡è®¡åˆ’ã€‚</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo crontab -e</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ“ä½œï¼Œå¯èƒ½ä¼šè®©ä½ é€‰æ‹©ç¼–è¾‘å™¨ï¼ˆæ¨èé€‰æ‹© <code>vim</code>ï¼Œæ¯”è¾ƒç®€å•ï¼‰ã€‚</p></li> <li><p><strong>æ·»åŠ å®šæ—¶ä»»åŠ¡</strong>â€‹</p> <p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä¸€è¡Œï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>0 5 * * * /sbin/reboot</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>**<code>0 5 * * *</code>**â€‹ æ˜¯æ—¶é—´è®¾ç½®ï¼Œå«ä¹‰ä¸ºï¼šåˆ†é’Ÿ(0) å°æ—¶(5) æ—¥(<em>) æœˆ(</em>) æ˜ŸæœŸ(*)ï¼Œå³æ¯å¤©å‡Œæ™¨ 5 ç‚¹æ•´ã€‚</p></li> <li><p>**<code>/sbin/reboot</code>**â€‹ æ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ï¼ˆç³»ç»Ÿé‡å¯å‘½ä»¤çš„ç»å¯¹è·¯å¾„ï¼‰ã€‚</p></li></ul></li> <li><p><strong>ä¿å­˜å¹¶é€€å‡º</strong></p> <ul><li><p>å¦‚æœä½¿ç”¨ <code>vim</code>ï¼šæŒ‰ <code>Ctrl + X</code>ï¼Œç„¶åæŒ‰ <code>Y</code>ç¡®è®¤ï¼Œæœ€åæŒ‰ <code>Enter</code>ä¿å­˜ã€‚</p></li> <li><p>å¦‚æœä½¿ç”¨ <code>vim</code>ï¼šæŒ‰ <code>Esc</code>ï¼Œç„¶åè¾“å…¥ <code>:wq</code>ï¼Œå†æŒ‰ <code>Enter</code>ã€‚</p></li></ul></li> <li><p><strong>éªŒè¯ä»»åŠ¡æ˜¯å¦æ·»åŠ æˆåŠŸ</strong></p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo crontab -l</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½ åº”è¯¥èƒ½çœ‹åˆ°åˆšæ‰æ·»åŠ çš„é‚£ä¸€è¡Œ <code>0 5 * * * /sbin/reboot</code>ã€‚</p></li></ol> <p>**å®Œæˆï¼**â€‹ ç³»ç»Ÿæ­¤åä¼šåœ¨æ¯å¤©å‡Œæ™¨ 5 ç‚¹è‡ªåŠ¨é‡å¯ã€‚</p> <hr> <h2 id="æ–¹æ³•äºŒ-ä½¿ç”¨-systemd-timers-ç°ä»£æ–¹æ³•" tabindex="-1">æ–¹æ³•äºŒï¼šä½¿ç”¨ Systemd Timersï¼ˆç°ä»£æ–¹æ³•ï¼‰ <a class="header-anchor" href="#æ–¹æ³•äºŒ-ä½¿ç”¨-systemd-timers-ç°ä»£æ–¹æ³•" aria-label="Permalink to &quot;æ–¹æ³•äºŒï¼šä½¿ç”¨ Systemd Timersï¼ˆç°ä»£æ–¹æ³•ï¼‰&quot;">â€‹</a></h2> <p><code>systemd</code>æ˜¯æ–°ä¸€ä»£çš„åˆå§‹åŒ–ç³»ç»Ÿï¼Œå®ƒé€šè¿‡ã€Œå®šæ—¶å™¨ã€ï¼ˆTimerï¼‰æ¥å®ç°ç±»ä¼¼ <code>cron</code>çš„åŠŸèƒ½ã€‚æ­¥éª¤ç¨å¤šï¼Œä½†æ›´ç»“æ„åŒ–ã€‚</p> <ol><li><p><strong>åˆ›å»º Service æ–‡ä»¶</strong>â€‹</p> <p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªå®šä¹‰ã€Œè¦æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ã€çš„ service æ–‡ä»¶ã€‚</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo vim /etc/systemd/system/daily-reboot.service</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Daily Reboot</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=oneshot</span></span>
<span class="line"><span>ExecStart=/usr/sbin/reboot</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>Type=oneshot</code>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œå°±ç»“æŸã€‚</li></ul></li> <li><p><strong>åˆ›å»º Timer æ–‡ä»¶</strong>â€‹</p> <p>æ¥ç€åˆ›å»ºä¸€ä¸ªåŒåçš„ timer æ–‡ä»¶æ¥å®šä¹‰ã€Œä½•æ—¶æ‰§è¡Œã€ã€‚</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo vim /etc/systemd/system/daily-reboot.timer</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Triggers a daily reboot at 5:00 AM</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Timer]</span></span>
<span class="line"><span>OnCalendar=*-*-* 05:00:00</span></span>
<span class="line"><span>Persistent=true</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=timers.target</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><p>**<code>OnCalendar=*-*-* 05:00:00</code>**â€‹ æ˜¯æ ¸å¿ƒé…ç½®ï¼Œæ„æ€æ˜¯ å¹´-æœˆ-æ—¥ 05:00:00ï¼Œå³æ¯å¤©å‡Œæ™¨ 5 ç‚¹ã€‚</p></li> <li><p>**<code>Persistent=true</code>**â€‹ è¡¨ç¤ºå¦‚æœä¸Šæ¬¡è§¦å‘æ—¶ç³»ç»Ÿå…³æœºäº†ï¼ˆæ¯”å¦‚åˆšå¥½åœ¨å‡Œæ™¨5ç‚¹å…³æœºäº†ï¼‰ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶ä¼šç«‹å³è¡¥æ‰§è¡Œã€‚</p></li></ul></li> <li><p><strong>å¯ç”¨å¹¶å¯åŠ¨ Timer</strong></p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># é‡æ–°åŠ è½½ systemd é…ç½®ï¼Œä½¿å…¶è¯†åˆ«æ–°æ–‡ä»¶</span></span>
<span class="line"><span>sudo systemctl daemon-reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å¯ç”¨å®šæ—¶å™¨ï¼ˆä½¿å…¶åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æ¿€æ´»ï¼‰</span></span>
<span class="line"><span>sudo systemctl enable daily-reboot.timer</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å¯åŠ¨å®šæ—¶å™¨</span></span>
<span class="line"><span>sudo systemctl start daily-reboot.timer</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p><strong>éªŒè¯ Timer çŠ¶æ€</strong></p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># æŸ¥çœ‹å®šæ—¶å™¨çŠ¶æ€</span></span>
<span class="line"><span>sudo systemctl status daily-reboot.timer</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æŸ¥çœ‹æ‰€æœ‰å·²å¯ç”¨çš„å®šæ—¶å™¨åˆ—è¡¨ï¼Œç¡®è®¤å®ƒåœ¨ä¸‹ä¸€æ¬¡è§¦å‘æ—¶é—´</span></span>
<span class="line"><span>sudo systemctl list-timers</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <hr> <h2 id="æ–¹æ³•å¯¹æ¯”ä¸å»ºè®®" tabindex="-1">æ–¹æ³•å¯¹æ¯”ä¸å»ºè®® <a class="header-anchor" href="#æ–¹æ³•å¯¹æ¯”ä¸å»ºè®®" aria-label="Permalink to &quot;æ–¹æ³•å¯¹æ¯”ä¸å»ºè®®&quot;">â€‹</a></h2> <table tabindex="0"><thead><tr><th>ç‰¹æ€§</th> <th>Crontab</th> <th>Systemd Timer</th></tr></thead> <tbody><tr><td><strong>ç®€å•æ€§</strong>â€‹</td> <td><strong>æç®€</strong>ï¼Œä¸€è¡Œå‘½ä»¤å³å¯</td> <td>éœ€è¦åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œæ­¥éª¤ç¹ç</td></tr> <tr><td><strong>æ—¥å¿—</strong>â€‹</td> <td>æ—¥å¿—åœ¨ <code>/var/log/syslog</code>æˆ– <code>journalctl</code>ä¸­æŸ¥çœ‹</td> <td>ä½¿ç”¨ <code>journalctl -u daily-reboot.service</code>æŸ¥çœ‹ï¼Œæ›´æ¸…æ™°</td></tr> <tr><td><strong>çµæ´»æ€§</strong>â€‹</td> <td>æ—¶é—´è¯­æ³•éå¸¸æˆç†Ÿçµæ´»</td> <td>æ—¶é—´è¯­æ³•åŒæ ·å¼ºå¤§ï¼Œæ”¯æŒå•è°ƒå®šæ—¶å™¨ï¼ˆç›¸å¯¹äºå¯åŠ¨æ—¶é—´ï¼‰</td></tr> <tr><td><strong>ä¾èµ–ç®¡ç†</strong>â€‹</td> <td>å¼±</td> <td><strong>å¼º</strong>ï¼Œå¯ä»¥å®šä¹‰ä¸å…¶ä»–æœåŠ¡çš„ä¾èµ–å…³ç³»</td></tr> <tr><td><strong>é€‚ç”¨åœºæ™¯</strong>â€‹</td> <td><strong>ç»å¤§å¤šæ•°æ—¥å¸¸è‡ªåŠ¨åŒ–ä»»åŠ¡</strong>â€‹</td> <td>æ›´é€‚åˆä¸ç³»ç»ŸæœåŠ¡æ·±åº¦é›†æˆçš„å¤æ‚ä»»åŠ¡</td></tr></tbody></table> <h1 id="å®šæ—¶æ¨é€ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯" tabindex="-1">å®šæ—¶æ¨é€ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯ <a class="header-anchor" href="#å®šæ—¶æ¨é€ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯" aria-label="Permalink to &quot;å®šæ—¶æ¨é€ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯&quot;">â€‹</a></h1> <h2 id="_1-åˆ›å»ºå‘é€-webhook-çš„-python-è„šæœ¬" tabindex="-1">1. åˆ›å»ºå‘é€ Webhook çš„ Python è„šæœ¬ <a class="header-anchor" href="#_1-åˆ›å»ºå‘é€-webhook-çš„-python-è„šæœ¬" aria-label="Permalink to &quot;1. åˆ›å»ºå‘é€ Webhook çš„ Python è„šæœ¬&quot;">â€‹</a></h2> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo vim /usr/local/bin/send_meeting_reminder.py</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/usr/bin/env python3</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> json</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sys</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> datetime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> datetime</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> send_webhook</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è¯·æ›¿æ¢ä¸ºæ‚¨çš„ä¼ä¸šå¾®ä¿¡æœºå™¨äºº Webhook URL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    webhook_url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_WEBHOOK_KEY&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æŒ‰ç…§è¦æ±‚æ ¼å¼åŒ–çš„æ¶ˆæ¯å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;msgtype&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;markdown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;markdown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;**ğŸ“… æ¯æ—¥æ—©ä¼šæé†’**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">å„ä½åŒäº‹ï¼Œè¯·åŠæ—¶æ›´æ–°ä»Šæ—¥çš„æ—©ä¼šè·Ÿè¸ªè¡¨æ ¼ï¼š</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">- ğŸ“Š [ç‚¹å‡»å¡«å†™æ—©ä¼šè·Ÿè¸ªè¡¨](é“¾æ¥) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">- â° è¯·åœ¨09:45å‰å®Œæˆæ›´æ–°&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å‘é€ POST è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Content-Type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.post(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            webhook_url, </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">json.dumps(message, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ensure_ascii</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).encode(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">headers,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è®°å½•æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        log_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">datetime.now()</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: æ—©ä¼šæé†’å‘é€</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æˆåŠŸ&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> else</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;å¤±è´¥&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> - çŠ¶æ€ç : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response.status_code</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(log_message)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å†™å…¥ç³»ç»Ÿæ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/var/log/meeting-reminder.log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            f.write(log_message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        error_msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">datetime.now()</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: å‘é€Webhookæ—¶å‡ºé”™: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error_msg)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/var/log/meeting-reminder.log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            f.write(error_msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    send_webhook()</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>ç»™è„šæœ¬æ‰§è¡Œæƒé™ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo chmod +x /usr/local/bin/send_meeting_reminder.py</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å®‰è£… Python ä¾èµ–ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo apt update</span></span>
<span class="line"><span>sudo apt install python3-pip -y</span></span>
<span class="line"><span>sudo pip3 install requests</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><hr> <h2 id="_2-åˆ›å»º-systemd-service-æ–‡ä»¶" tabindex="-1">2. åˆ›å»º Systemd Service æ–‡ä»¶ <a class="header-anchor" href="#_2-åˆ›å»º-systemd-service-æ–‡ä»¶" aria-label="Permalink to &quot;2. åˆ›å»º Systemd Service æ–‡ä»¶&quot;">â€‹</a></h2> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo vim /etc/systemd/system/meeting-reminder.service</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=å‘é€æ¯æ—¥æ—©ä¼šæé†’åˆ°ä¼ä¸šå¾®ä¿¡ç¾¤</span></span>
<span class="line"><span>Wants=meeting-reminder.timer</span></span>
<span class="line"><span>After=network.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>Type=oneshot</span></span>
<span class="line"><span>User=root</span></span>
<span class="line"><span>ExecStart=/usr/bin/python3 /home/ubuntu/meeting-reminder/send_meeting_reminder.py</span></span>
<span class="line"><span>StandardOutput=journal</span></span>
<span class="line"><span>StandardError=journal</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr> <h2 id="_3-åˆ›å»º-systemd-timer-æ–‡ä»¶-å…³é”®ä¿®æ”¹" tabindex="-1">3. åˆ›å»º Systemd Timer æ–‡ä»¶ï¼ˆå…³é”®ä¿®æ”¹ï¼‰ <a class="header-anchor" href="#_3-åˆ›å»º-systemd-timer-æ–‡ä»¶-å…³é”®ä¿®æ”¹" aria-label="Permalink to &quot;3. åˆ›å»º Systemd Timer æ–‡ä»¶ï¼ˆå…³é”®ä¿®æ”¹ï¼‰&quot;">â€‹</a></h2> <p>ç”±äºéœ€è¦åœ¨å·¥ä½œæ—¥æ—©ä¸Š9:30å‘é€ï¼Œä½†æé†’å†…å®¹è¦æ±‚åœ¨09:45å‰å®Œæˆï¼Œè¿™ä¸ªæ—¶é—´è®¾ç½®æ˜¯åˆç†çš„ã€‚</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>sudo vim /etc/systemd/system/meeting-reminder.timer</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=å·¥ä½œæ—¥æ—©ä¸Š9:30å‘é€æ—©ä¼šæé†’</span></span>
<span class="line"><span>Requires=meeting-reminder.service</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Timer]</span></span>
<span class="line"><span># æ¯å‘¨ä¸€è‡³å‘¨äº”æ—©ä¸Š9:30æ‰§è¡Œ</span></span>
<span class="line"><span>OnCalendar=Mon..Fri 09:30:00</span></span>
<span class="line"><span>Persistent=false</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=timers.target</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr> <h2 id="_4-å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡" tabindex="-1">4. å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡ <a class="header-anchor" href="#_4-å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡" aria-label="Permalink to &quot;4. å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡&quot;">â€‹</a></h2> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># é‡æ–°åŠ è½½ systemd é…ç½®</span></span>
<span class="line"><span>sudo systemctl daemon-reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å¯ç”¨å¹¶å¯åŠ¨å®šæ—¶å™¨</span></span>
<span class="line"><span>sudo systemctl enable meeting-reminder.timer</span></span>
<span class="line"><span>sudo systemctl start meeting-reminder.timer</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å¯ç”¨æœåŠ¡</span></span>
<span class="line"><span>sudo systemctl enable meeting-reminder.service</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr> <h2 id="_5-é‡è¦é…ç½®è¯´æ˜" tabindex="-1">5. é‡è¦é…ç½®è¯´æ˜ <a class="header-anchor" href="#_5-é‡è¦é…ç½®è¯´æ˜" aria-label="Permalink to &quot;5. é‡è¦é…ç½®è¯´æ˜&quot;">â€‹</a></h2> <h3 id="æ›¿æ¢å®é™…å‚æ•°" tabindex="-1">æ›¿æ¢å®é™…å‚æ•° <a class="header-anchor" href="#æ›¿æ¢å®é™…å‚æ•°" aria-label="Permalink to &quot;æ›¿æ¢å®é™…å‚æ•°&quot;">â€‹</a></h3> <p>åœ¨è¿è¡Œå‰ï¼Œè¯·ä¿®æ”¹è„šæœ¬ä¸­çš„ä¸¤ä¸ªå…³é”®å‚æ•°ï¼š</p> <ol><li><p><strong>Webhook URL</strong>ï¼šå°† <code>YOUR_WEBHOOK_KEY</code>æ›¿æ¢ä¸ºæ‚¨çš„ä¼ä¸šå¾®ä¿¡æœºå™¨äººå®é™… Webhook åœ°å€</p></li> <li><p><strong>è·Ÿè¸ªè¡¨é“¾æ¥</strong>ï¼šå°† <code>é“¾æ¥</code>æ›¿æ¢ä¸ºå®é™…çš„æ—©ä¼šè·Ÿè¸ªè¡¨æ ¼ URL</p></li></ol> <h3 id="éªŒè¯é…ç½®" tabindex="-1">éªŒè¯é…ç½® <a class="header-anchor" href="#éªŒè¯é…ç½®" aria-label="Permalink to &quot;éªŒè¯é…ç½®&quot;">â€‹</a></h3> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># æŸ¥çœ‹å®šæ—¶å™¨çŠ¶æ€</span></span>
<span class="line"><span>sudo systemctl status meeting-reminder.timer</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æŸ¥çœ‹ä¸‹ä¸€æ¬¡æ‰§è¡Œæ—¶é—´</span></span>
<span class="line"><span>sudo systemctl list-timers | grep meeting-reminder</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æ‰‹åŠ¨æµ‹è¯•ä¸€æ¬¡ï¼ˆç¡®ä¿é…ç½®æ­£ç¡®åï¼‰</span></span>
<span class="line"><span>sudo systemctl start meeting-reminder.service</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—</span></span>
<span class="line"><span>sudo journalctl -u meeting-reminder.service -n 10</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr> <h2 id="_6-ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯æ ¼å¼è¯´æ˜" tabindex="-1">6. ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯æ ¼å¼è¯´æ˜ <a class="header-anchor" href="#_6-ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯æ ¼å¼è¯´æ˜" aria-label="Permalink to &quot;6. ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯æ ¼å¼è¯´æ˜&quot;">â€‹</a></h2> <p>æ ¹æ®ä¼ä¸šå¾®ä¿¡æœºå™¨äººæ–‡æ¡£ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ markdown æ ¼å¼å®Œå…¨ç¬¦åˆè¦æ±‚ï¼š</p> <ul><li><p>æ”¯æŒåŠ ç²—ã€é“¾æ¥ã€åˆ—è¡¨ç­‰æ ¼å¼</p></li> <li><p>æ¶ˆæ¯å†…å®¹æ¸…æ™°æ˜äº†ï¼ŒåŒ…å«å…·ä½“çš„æ—¶é—´è¦æ±‚å’Œæ“ä½œæŒ‡å¼•</p></li></ul> <p>å¦‚æœéœ€è¦è°ƒæ•´æ¶ˆæ¯æ ¼å¼ï¼Œå¯ä»¥ä¿®æ”¹ Python è„šæœ¬ä¸­çš„ <code>message</code>å†…å®¹éƒ¨åˆ†ã€‚</p> <hr> <h2 id="æ•…éšœæ’é™¤æç¤º" tabindex="-1">æ•…éšœæ’é™¤æç¤º <a class="header-anchor" href="#æ•…éšœæ’é™¤æç¤º" aria-label="Permalink to &quot;æ•…éšœæ’é™¤æç¤º&quot;">â€‹</a></h2> <p>å¦‚æœæ¶ˆæ¯å‘é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š</p> <ol><li><p>Webhook URL æ˜¯å¦æ­£ç¡®</p></li> <li><p>æœåŠ¡å™¨ç½‘ç»œæ˜¯å¦èƒ½è®¿é—®ä¼ä¸šå¾®ä¿¡ API</p></li> <li><p>ä¼ä¸šå¾®ä¿¡æœºå™¨äººæ˜¯å¦å·²æ­£ç¡®é…ç½®å¹¶å¯ç”¨</p></li> <li><p>æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š<code>sudo journalctl -u meeting-reminder.service -f</code></p></li></ol> <p>è¿™æ ·é…ç½®åï¼Œç³»ç»Ÿä¼šåœ¨æ¯ä¸ªå·¥ä½œæ—¥çš„æ—©ä¸Š9:30å‡†æ—¶å‘é€æ ¼å¼åŒ–çš„æ—©ä¼šæé†’åˆ°ä¼ä¸šå¾®ä¿¡ç¾¤ã€‚</p> <h1 id="å–æ¶ˆå®šæ—¶å™¨" tabindex="-1">å–æ¶ˆå®šæ—¶å™¨ <a class="header-anchor" href="#å–æ¶ˆå®šæ—¶å™¨" aria-label="Permalink to &quot;å–æ¶ˆå®šæ—¶å™¨&quot;">â€‹</a></h1> <p>è¦å–æ¶ˆå®šæ—¶å™¨å’ŒæœåŠ¡ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p> <hr> <h2 id="_1-åœæ­¢å¹¶ç¦ç”¨å®šæ—¶å™¨å’ŒæœåŠ¡" tabindex="-1"><strong>1. åœæ­¢å¹¶ç¦ç”¨å®šæ—¶å™¨å’ŒæœåŠ¡</strong> <a class="header-anchor" href="#_1-åœæ­¢å¹¶ç¦ç”¨å®šæ—¶å™¨å’ŒæœåŠ¡" aria-label="Permalink to &quot;**1. åœæ­¢å¹¶ç¦ç”¨å®šæ—¶å™¨å’ŒæœåŠ¡**&quot;">â€‹</a></h2> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># åœæ­¢å®šæ—¶å™¨</span></span>
<span class="line"><span>sudo systemctl stop meeting-reminder.timer</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ç¦ç”¨å®šæ—¶å™¨ï¼ˆé˜²æ­¢å¼€æœºè‡ªå¯ï¼‰</span></span>
<span class="line"><span>sudo systemctl disable meeting-reminder.timer</span></span>
<span class="line"><span></span></span>
<span class="line"><span># åœæ­¢æœåŠ¡</span></span>
<span class="line"><span>sudo systemctl stop meeting-reminder.service</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ç¦ç”¨æœåŠ¡</span></span>
<span class="line"><span>sudo systemctl disable meeting-reminder.service</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr> <h2 id="_2-æ£€æŸ¥çŠ¶æ€ç¡®è®¤å·²åœæ­¢" tabindex="-1"><strong>2. æ£€æŸ¥çŠ¶æ€ç¡®è®¤å·²åœæ­¢</strong> <a class="header-anchor" href="#_2-æ£€æŸ¥çŠ¶æ€ç¡®è®¤å·²åœæ­¢" aria-label="Permalink to &quot;**2. æ£€æŸ¥çŠ¶æ€ç¡®è®¤å·²åœæ­¢**&quot;">â€‹</a></h2> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># æ£€æŸ¥å®šæ—¶å™¨çŠ¶æ€ï¼ˆåº”è¯¥æ˜¾ç¤º inactiveï¼‰</span></span>
<span class="line"><span>sudo systemctl status meeting-reminder.timer</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼ˆåº”è¯¥æ˜¾ç¤º inactiveï¼‰</span></span>
<span class="line"><span>sudo systemctl status meeting-reminder.service</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æŸ¥çœ‹æ‰€æœ‰æ´»åŠ¨çš„å®šæ—¶å™¨ï¼Œç¡®è®¤ meeting-reminder ä¸åœ¨åˆ—è¡¨ä¸­</span></span>
<span class="line"><span>sudo systemctl list-timers</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr> <h2 id="_3-é‡æ–°åŠ è½½-systemd-é…ç½®" tabindex="-1"><strong>3. é‡æ–°åŠ è½½ systemd é…ç½®</strong> <a class="header-anchor" href="#_3-é‡æ–°åŠ è½½-systemd-é…ç½®" aria-label="Permalink to &quot;**3. é‡æ–°åŠ è½½ systemd é…ç½®**&quot;">â€‹</a></h2> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># é‡æ–°åŠ è½½ systemd é…ç½®</span></span>
<span class="line"><span>sudo systemctl daemon-reload</span></span>
<span class="line"><span></span></span>
<span class="line"><span># é‡ç½®æ‰€æœ‰å¤±è´¥çš„å•å…ƒçŠ¶æ€</span></span>
<span class="line"><span>sudo systemctl reset-failed</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h2 id="_4-å¯é€‰-åˆ é™¤ç›¸å…³æ–‡ä»¶" tabindex="-1"><strong>4. å¯é€‰ï¼šåˆ é™¤ç›¸å…³æ–‡ä»¶</strong> <a class="header-anchor" href="#_4-å¯é€‰-åˆ é™¤ç›¸å…³æ–‡ä»¶" aria-label="Permalink to &quot;**4. å¯é€‰ï¼šåˆ é™¤ç›¸å…³æ–‡ä»¶**&quot;">â€‹</a></h2> <p>å¦‚æœæ‚¨ç¡®å®šä¸å†éœ€è¦è¿™ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå¯ä»¥åˆ é™¤åˆ›å»ºçš„æ–‡ä»¶ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># åˆ é™¤æœåŠ¡æ–‡ä»¶</span></span>
<span class="line"><span>sudo rm /etc/systemd/system/meeting-reminder.service</span></span>
<span class="line"><span></span></span>
<span class="line"><span># åˆ é™¤å®šæ—¶å™¨æ–‡ä»¶</span></span>
<span class="line"><span>sudo rm /etc/systemd/system/meeting-reminder.timer</span></span>
<span class="line"><span></span></span>
<span class="line"><span># åˆ é™¤Pythonè„šæœ¬ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span>sudo rm /usr/local/bin/send_meeting_reminder.py</span></span>
<span class="line"><span></span></span>
<span class="line"><span># åˆ é™¤æ—¥å¿—æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span>sudo rm /var/log/meeting-reminder.log</span></span>
<span class="line"><span></span></span>
<span class="line"><span># é‡æ–°åŠ è½½ systemd é…ç½®</span></span>
<span class="line"><span>sudo systemctl daemon-reload</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr> <h2 id="_5-éªŒè¯æ¸…ç†å®Œæˆ" tabindex="-1"><strong>5. éªŒè¯æ¸…ç†å®Œæˆ</strong> <a class="header-anchor" href="#_5-éªŒè¯æ¸…ç†å®Œæˆ" aria-label="Permalink to &quot;**5. éªŒè¯æ¸…ç†å®Œæˆ**&quot;">â€‹</a></h2> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ç›¸å…³æ–‡ä»¶å­˜åœ¨</span></span>
<span class="line"><span>sudo systemctl list-unit-files | grep meeting-reminder</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æ£€æŸ¥å®šæ—¶å™¨åˆ—è¡¨ç¡®è®¤å·²ç§»é™¤</span></span>
<span class="line"><span>sudo systemctl list-timers</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h2 id="_6-å¦‚æœéœ€è¦é‡æ–°å¯ç”¨" tabindex="-1"><strong>6. å¦‚æœéœ€è¦é‡æ–°å¯ç”¨</strong> <a class="header-anchor" href="#_6-å¦‚æœéœ€è¦é‡æ–°å¯ç”¨" aria-label="Permalink to &quot;**6. å¦‚æœéœ€è¦é‡æ–°å¯ç”¨**&quot;">â€‹</a></h2> <p>å¦‚æœæ‚¨å°†æ¥éœ€è¦é‡æ–°å¯ç”¨è¿™ä¸ªå®šæ—¶ä»»åŠ¡ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># é‡æ–°åˆ›å»ºæ–‡ä»¶åæ‰§è¡Œ</span></span>
<span class="line"><span>sudo systemctl daemon-reload</span></span>
<span class="line"><span>sudo systemctl enable meeting-reminder.timer</span></span>
<span class="line"><span>sudo systemctl start meeting-reminder.timer</span></span>
<span class="line"><span>sudo systemctl enable meeting-reminder.service</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h2 id="ä¸€é”®æ¸…ç†å‘½ä»¤" tabindex="-1"><strong>ä¸€é”®æ¸…ç†å‘½ä»¤</strong> <a class="header-anchor" href="#ä¸€é”®æ¸…ç†å‘½ä»¤" aria-label="Permalink to &quot;**ä¸€é”®æ¸…ç†å‘½ä»¤**&quot;">â€‹</a></h2> <p>å¦‚æœæ‚¨æƒ³è¦å¿«é€Ÿæ¸…ç†æ‰€æœ‰ç›¸å…³å†…å®¹ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># åœæ­¢å’Œç¦ç”¨æœåŠ¡</span></span>
<span class="line"><span>sudo systemctl stop meeting-reminder.timer meeting-reminder.service</span></span>
<span class="line"><span>sudo systemctl disable meeting-reminder.timer meeting-reminder.service</span></span>
<span class="line"><span></span></span>
<span class="line"><span># åˆ é™¤æ–‡ä»¶</span></span>
<span class="line"><span>sudo rm -f /etc/systemd/system/meeting-reminder.service \\</span></span>
<span class="line"><span>           /etc/systemd/system/meeting-reminder.timer \\</span></span>
<span class="line"><span>           /usr/local/bin/send_meeting_reminder.py</span></span>
<span class="line"><span></span></span>
<span class="line"><span># é‡æ–°åŠ è½½é…ç½®</span></span>
<span class="line"><span>sudo systemctl daemon-reload</span></span>
<span class="line"><span>sudo systemctl reset-failed</span></span>
<span class="line"><span></span></span>
<span class="line"><span># éªŒè¯æ¸…ç†</span></span>
<span class="line"><span>echo &quot;æ£€æŸ¥å®šæ—¶å™¨çŠ¶æ€:&quot;</span></span>
<span class="line"><span>sudo systemctl status meeting-reminder.timer 2&gt;/dev/null || echo &quot;å®šæ—¶å™¨å·²åˆ é™¤&quot;</span></span>
<span class="line"><span>echo &quot;æ£€æŸ¥æœåŠ¡çŠ¶æ€:&quot;</span></span>
<span class="line"><span>sudo systemctl status meeting-reminder.service 2&gt;/dev/null || echo &quot;æœåŠ¡å·²åˆ é™¤&quot;</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><hr> <h2 id="é‡è¦æé†’" tabindex="-1"><strong>é‡è¦æé†’</strong> <a class="header-anchor" href="#é‡è¦æé†’" aria-label="Permalink to &quot;**é‡è¦æé†’**&quot;">â€‹</a></h2> <ol><li><p><strong>å¤‡ä»½éœ€æ±‚</strong>ï¼šå¦‚æœæ‚¨å¯èƒ½éœ€è¦é‡æ–°ä½¿ç”¨è¿™ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå»ºè®®å…ˆå¤‡ä»½ç›¸å…³æ–‡ä»¶è€Œä¸æ˜¯ç›´æ¥åˆ é™¤</p></li> <li><p><strong>æ—¥å¿—ä¿ç•™</strong>ï¼šæ—¥å¿—æ–‡ä»¶ <code>/var/log/meeting-reminder.log</code>åŒ…å«å†å²è®°å½•ï¼Œå¯æ ¹æ®éœ€è¦å†³å®šæ˜¯å¦ä¿ç•™</p></li> <li><p><strong>Pythonä¾èµ–</strong>ï¼šå®‰è£…çš„ <code>requests</code>åº“å¯ä»¥ä¿ç•™ï¼Œå¯èƒ½å¯¹å…¶ä»–è„šæœ¬æœ‰ç”¨</p></li></ol> <p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œå®šæ—¶å™¨å’Œç›¸å…³æœåŠ¡å°±å®Œå…¨ä»æ‚¨çš„ç³»ç»Ÿä¸­ç§»é™¤äº†ã€‚</p>`,150)])])}const m=n(p,[["render",l]]);export{b as __pageData,m as default};
