import{_ as e,o as a,c as s,ag as n}from"./chunks/framework.DEqXEGcv.js";const o=JSON.parse('{"title":"CMake 学习笔记","description":"","frontmatter":{"tags":["tool","cmake"]},"headers":[],"relativePath":"5 工具/cmake学习.md","filePath":"5 工具/cmake学习.md","lastUpdated":1770953870000}'),i={name:"5 工具/cmake学习.md"};function l(r,t,d,c,p,k){return a(),s("div",null,[...t[0]||(t[0]=[n(`<h1 id="cmake-学习笔记" tabindex="-1">CMake 学习笔记 <a class="header-anchor" href="#cmake-学习笔记" aria-label="Permalink to &quot;CMake 学习笔记&quot;">​</a></h1> <p>CMake是一个跨平台的项目管理工具， CMakeLists.txt 文件在CMake作用下生成Makefile文件。</p> <h2 id="cmake-运行流程" tabindex="-1">CMake 运行流程 <a class="header-anchor" href="#cmake-运行流程" aria-label="Permalink to &quot;CMake 运行流程&quot;">​</a></h2> <p>源文件在<strong>该目录下</strong>的 CMakeLists.txt 在 CMake 作用下生成 Makefile 文件，<code>make</code> 命令根据 Makefile 对源文件进行编译。</p> <p><img src="https://blog-1312962011.cos.ap-nanjing.myqcloud.com/imgs/CMakeFlow.png" alt="CMakeFlow" loading="lazy"></p> <p>CMake 简化了 Makefile 文件的编写难度，CMake 会自动检测可用编译器，根据配置文件自动寻找外部依赖库等。<strong>每个目录下都应该有 CMakeLists.txt 文件。根 CMakeLists.txt 会收集所有目录下的子 CMakeLists.txt</strong>。</p> <p>最小 CMakeLists.txt 的内容：</p> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># cmake语法关键字--大/小写无关</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># cmake的最低版本号，注意VERSION需要大写</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CMAKE_MINIMUM_REQUIRED(VERSION</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置一个工程名字</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">project(Demo1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 目标可执行程序Demo， 需要编译main.cc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_executable(Demo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.cc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>编写完成 CMakeLists.txt 之后，就可以执行 <code>cmake \${PATH}</code> 来生成 makefile 文件，其中 <code>\${PATH}</code> 为根 CMakeLists.txt 路径。</p> <h2 id="cmake-语法预设变量" tabindex="-1">CMake 语法预设变量 <a class="header-anchor" href="#cmake-语法预设变量" aria-label="Permalink to &quot;CMake 语法预设变量&quot;">​</a></h2> <table tabindex="0"><thead><tr><th style="text-align:center;">变量</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">CMAKE_MAJOR_VERSION</td> <td style="text-align:center;">cmake 主版本号</td></tr> <tr><td style="text-align:center;">CMAKE_MINOR_VERSION</td> <td style="text-align:center;">cmake 次版本号</td></tr> <tr><td style="text-align:center;">CMAKE_C_FLAGS</td> <td style="text-align:center;">设置 C 编译选项</td></tr> <tr><td style="text-align:center;">CMAKE_CXX_FLAGS</td> <td style="text-align:center;">设置 C++ 编译选项</td></tr> <tr><td style="text-align:center;">PROJECT_SOURCE_DIR</td> <td style="text-align:center;">工程的根目录</td></tr> <tr><td style="text-align:center;">PROJECT_BINARY_DIR</td> <td style="text-align:center;">运行 cmake 命令的目录</td></tr> <tr><td style="text-align:center;">CMAKE_CURRENT_SOURCE_DIR</td> <td style="text-align:center;">当前CMakeLists.txt 所在路径</td></tr> <tr><td style="text-align:center;">CMAKE_CURRENT_BINARY_DIR</td> <td style="text-align:center;">目标文件编译目录</td></tr> <tr><td style="text-align:center;">EXECUTABLE_OUTPUT_PATH</td> <td style="text-align:center;">重新定义目标二进制可执行文件的存放位置</td></tr> <tr><td style="text-align:center;">LIBRARY_OUTPUT_PATH</td> <td style="text-align:center;">重新定义目标链接库文件的存放位置</td></tr> <tr><td style="text-align:center;">CMAKE_ROOT</td> <td style="text-align:center;">CMake 安装路径</td></tr></tbody></table>`,20)])])}const g=e(i,[["render",l]]);export{o as __pageData,g as default};
