import{_ as t,o as i,c as a,ag as n}from"./chunks/framework.DEqXEGcv.js";const o=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"2 计算机/中间件/ZeroMQ/zmq socket 事件对照表.md","filePath":"2 计算机/中间件/ZeroMQ/zmq socket 事件对照表.md","lastUpdated":1770949611000}'),d={name:"2 计算机/中间件/ZeroMQ/zmq socket 事件对照表.md"};function e(E,s,h,l,k,p){return i(),a("div",null,[...s[0]||(s[0]=[n(`<h3 id="📋-zeromq-socket-monitor-events-十进制对照表" tabindex="-1">📋 <strong>ZeroMQ Socket Monitor Events 十进制对照表</strong> <a class="header-anchor" href="#📋-zeromq-socket-monitor-events-十进制对照表" aria-label="Permalink to &quot;📋 **ZeroMQ Socket Monitor Events 十进制对照表**&quot;">​</a></h3> <table tabindex="0"><thead><tr><th>事件宏定义</th> <th>十六进制值</th> <th>十进制值</th> <th>说明</th></tr></thead> <tbody><tr><td><code>ZMQ_EVENT_CONNECTED</code></td> <td><code>0x0001</code></td> <td><strong>1</strong></td> <td>成功建立出站连接（TCP 连接完成）</td></tr> <tr><td><code>ZMQ_EVENT_CONNECT_DELAYED</code></td> <td><code>0x0002</code></td> <td><strong>2</strong></td> <td>连接被延迟（例如无可用 I/O 线程）</td></tr> <tr><td><code>ZMQ_EVENT_CONNECT_RETRIED</code></td> <td><code>0x0004</code></td> <td><strong>4</strong></td> <td>连接失败后重试（含重试间隔）</td></tr> <tr><td><code>ZMQ_EVENT_LISTENING</code></td> <td><code>0x0008</code></td> <td><strong>8</strong></td> <td>成功绑定并开始监听（<code>bind()</code> 成功）</td></tr> <tr><td><code>ZMQ_EVENT_BIND_FAILED</code></td> <td><code>0x0010</code></td> <td><strong>16</strong></td> <td>绑定失败（如端口被占用）</td></tr> <tr><td><code>ZMQ_EVENT_ACCEPTED</code></td> <td><code>0x0020</code></td> <td><strong>32</strong></td> <td>接受入站连接（TCP accept 成功）</td></tr> <tr><td><code>ZMQ_EVENT_ACCEPT_FAILED</code></td> <td><code>0x0040</code></td> <td><strong>64</strong></td> <td>接受连接失败（如资源不足）</td></tr> <tr><td><code>ZMQ_EVENT_CLOSED</code></td> <td><code>0x0080</code></td> <td><strong>128</strong></td> <td>套接字成功关闭</td></tr> <tr><td><code>ZMQ_EVENT_CLOSE_FAILED</code></td> <td><code>0x0100</code></td> <td><strong>256</strong></td> <td>套接字关闭失败</td></tr> <tr><td><code>ZMQ_EVENT_DISCONNECTED</code></td> <td><code>0x0200</code></td> <td><strong>512</strong></td> <td>连接断开（对端关闭或网络中断）</td></tr> <tr><td><code>ZMQ_EVENT_MONITOR_STOPPED</code></td> <td><code>0x0400</code></td> <td><strong>1024</strong></td> <td>监控被停止（调用 <code>zmq_socket_monitor(..., NULL, ...)</code>）</td></tr> <tr><td><code>ZMQ_EVENT_HANDSHAKE_FAILED_NO_DETAIL</code></td> <td><code>0x0800</code></td> <td><strong>2048</strong></td> <td>握手失败，无详细原因（通常为系统级错误，<code>event_value = errno</code>）</td></tr> <tr><td><code>ZMQ_EVENT_HANDSHAKE_SUCCEEDED</code></td> <td><code>0x1000</code></td> <td><strong>4096</strong></td> <td>ZMTP 握手成功（含认证成功）</td></tr> <tr><td><code>ZMQ_EVENT_HANDSHAKE_FAILED_PROTOCOL</code></td> <td><code>0x2000</code></td> <td><strong>8192</strong></td> <td>协议错误（<code>event_value = ZMQ_PROTOCOL_ERROR_*</code>）</td></tr> <tr><td><code>ZMQ_EVENT_HANDSHAKE_FAILED_AUTH</code></td> <td><code>0x4000</code></td> <td><strong>16384</strong></td> <td>认证失败（<code>event_value = ZAP 状态码</code>，如 300/400/500）</td></tr> <tr><td><code>ZMQ_EVENT_ALL</code></td> <td><code>0xFFFF</code></td> <td><strong>65535</strong></td> <td>所有事件的掩码（用于启用全部监控）</td></tr></tbody></table> <hr> <h3 id="🔐-协议错误子类型-用于-zmq-event-handshake-failed-protocol-的-event-value" tabindex="-1">🔐 <strong>协议错误子类型（用于 <code>ZMQ_EVENT_HANDSHAKE_FAILED_PROTOCOL</code> 的 <code>event_value</code>）</strong> <a class="header-anchor" href="#🔐-协议错误子类型-用于-zmq-event-handshake-failed-protocol-的-event-value" aria-label="Permalink to &quot;🔐 **协议错误子类型（用于 \`ZMQ_EVENT_HANDSHAKE_FAILED_PROTOCOL\` 的 \`event_value\`）**&quot;">​</a></h3> <p>这些值在事件类型为 <strong>8192</strong> 时，作为 <code>event_value</code> 出现：</p> <table tabindex="0"><thead><tr><th>错误宏定义</th> <th>十六进制值</th> <th>十进制值</th> <th>说明</th></tr></thead> <tbody><tr><td><code>ZMQ_PROTOCOL_ERROR_ZMTP_UNSPECIFIED</code></td> <td><code>0x10000000</code></td> <td><strong>268435456</strong></td> <td>未指定的 ZMTP 错误</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZMTP_UNEXPECTED_COMMAND</code></td> <td><code>0x10000001</code></td> <td><strong>268435457</strong></td> <td>收到意外的 ZMTP 命令</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZMTP_INVALID_SEQUENCE</code></td> <td><code>0x10000002</code></td> <td><strong>268435458</strong></td> <td>ZMTP 命令序列无效</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZMTP_KEY_EXCHANGE</code></td> <td><code>0x10000003</code></td> <td><strong>268435459</strong></td> <td>密钥交换失败（CURVE）</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZMTP_MALFORMED_COMMAND_HELLO</code></td> <td><code>0x10000013</code></td> <td><strong>268435475</strong></td> <td><code>HELLO</code> 命令格式错误</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZMTP_MALFORMED_COMMAND_INITIATE</code></td> <td><code>0x10000014</code></td> <td><strong>268435476</strong></td> <td><code>INITIATE</code> 命令格式错误</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZMTP_MECHANISM_MISMATCH</code></td> <td><code>0x11000002</code></td> <td><strong>285212674</strong></td> <td>安全机制不匹配（如一端用 CURVE，另一端未启用）</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZMTP_CRYPTOGRAPHIC</code></td> <td><code>0x11000001</code></td> <td><strong>285212673</strong></td> <td>加密操作失败（如密钥无效）</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZAP_UNSPECIFIED</code></td> <td><code>0x20000000</code></td> <td><strong>536870912</strong></td> <td>ZAP（认证代理）未指定错误</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZAP_MALFORMED_REPLY</code></td> <td><code>0x20000001</code></td> <td><strong>536870913</strong></td> <td>ZAP 回复格式错误</td></tr> <tr><td><code>ZMQ_PROTOCOL_ERROR_ZAP_BAD_VERSION</code></td> <td><code>0x20000003</code></td> <td><strong>536870915</strong></td> <td>ZAP 版本不支持</td></tr></tbody></table> <blockquote><p>💡 提示：<code>ZMQ_PROTOCOL_ERROR_*</code> 的十进制值较大（≥ 2.6 亿），可通过位运算或查表识别。</p></blockquote> <hr> <h3 id="🧪-使用示例-c-日志解析" tabindex="-1">🧪 使用示例（C++ 日志解析） <a class="header-anchor" href="#🧪-使用示例-c-日志解析" aria-label="Permalink to &quot;🧪 使用示例（C++ 日志解析）&quot;">​</a></h3> <div class="language-cpp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle_monitor_event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">uint16_t</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> char*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::unordered_map</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;uint16_t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_names </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CONNECTED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CONNECT_DELAYED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CONNECT_RETRIED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;LISTENING&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;BIND_FAILED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">32</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ACCEPTED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ACCEPT_FAILED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CLOSED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CLOSE_FAILED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">512</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DISCONNECTED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MONITOR_STOPPED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2048</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HANDSHAKE_FAILED_NO_DETAIL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4096</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HANDSHAKE_SUCCEEDED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8192</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HANDSHAKE_FAILED_PROTOCOL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16384</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HANDSHAKE_FAILED_AUTH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    auto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> it </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_names.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    std</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::string name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (it </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event_names.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> it-&gt;second </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;UNKNOWN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LOG_DEBUG </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Monitor event: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; (&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;) at &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addr;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><hr> <h3 id="📌-注意事项" tabindex="-1">📌 注意事项 <a class="header-anchor" href="#📌-注意事项" aria-label="Permalink to &quot;📌 注意事项&quot;">​</a></h3> <ul><li>所有事件值均为 <strong>位掩码（bitmask）</strong>，可组合使用（如 <code>ZMQ_EVENT_CONNECTED | ZMQ_EVENT_DISCONNECTED</code>）。</li> <li><code>event_value</code> 字段在不同事件中有不同含义：
<ul><li><code>HANDSHAKE_FAILED_NO_DETAIL</code> → <code>errno</code></li> <li><code>HANDSHAKE_FAILED_PROTOCOL</code> → <code>ZMQ_PROTOCOL_ERROR_*</code></li> <li><code>HANDSHAKE_FAILED_AUTH</code> → ZAP 状态码（300=临时拒绝，400=无效请求，500=内部错误）</li></ul></li> <li><code>ZMQ_EVENT_ALL = 65535</code> 是前 16 个事件的全集（<code>0xFFFF</code>）。</li></ul> <hr> <p>此表可直接用于日志分析、监控工具开发或故障排查。建议收藏！</p>`,28)])])}const c=t(d,[["render",e]]);export{o as __pageData,c as default};
